# Pull base image.
FROM howtox/node_base

RUN apt-get -y install python-setuptools

# Need make
RUN apt-get install -y build-essential

RUN easy_install supervisor
RUN mkdir -p /var/log/supervisor

# create directory for child images to store configuration in
RUN mkdir -p /etc/supervisor/conf.d
ADD ./srv/howtox/supervisord.conf /etc/supervisord.conf

ENV HOME /root
WORKDIR /root

# Add scripts
{{preBuildHook}}
ADD ./root /root
ADD ./srv /srv
RUN chmod +x /srv/howtox/docker_start.sh
{{postBuildHook}}
